<!-- <!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html> -->


<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Log In</title>
     <link rel="stylesheet" href="mini.css">
  </head>
  <body>
    <h1>Log In</h1>
    <div class="container">
      <label for="email"><b>Email</b></label>
      <input
        id="email"
        type="email"
        placeholder="Enter Email"
        name="email"
        required
      />

      <label for="password"><b>Password</b></label>
      <input
        id="password"
        type="password"
        placeholder="Enter Password"
        name="password"
        required
      />

      <button type="submit" onclick="handleSubmit()">Login</button>
      <span id="responseMessage"></span>



      <h1>Create Account</h1>
      <div class="container">
        <label for="email"><b>Email</b></label>
        <input
          id="email"
          type="email"
          placeholder="Enter Email"
          name="email"
          required
        />
  
        <label for="password"><b>Password</b></label>
        <input
          id="password"
          type="password"
          placeholder="Enter Password"
          name="password"
          required
        />

        <label for="milegoal"><b>Mile Goal</b></label>
        <input
          id="milegoal"
          type="mile"
          placeholder="Mile Goal"
          name="milegoal"
          required
        />
  
        <button type="submit" onclick="handleSubmit2()">Create Account</button>
        <!-- <span id="responseMessage"></span> -->
    </div>
    <script>

//for create an account 

function handleSubmit2() {

  
  var email = document.getElementById('email').value;
  var password = document.getElementById('password').value;
  var milegoal = document.getElementById('milegoal').value;

        // get the data from the form
        console.log('here')
        fetch('http://localhost:8080/api/users', {
            method: "POST",
            headers: {
                Accept: "application/json",
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                email: email,
                password: password, 
                milegoal: milegoal,
                userId: 1
            })
        })}

      //   const email = document.getElementById("email").value;
      //   const password = document.getElementById("password").value;
      //   console.log(
      //     "login.html - handleSubmit: email - password",
      //     email,
      //     password
      //   );
      // }


      function handleSubmit() {
        // get the data from the form
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        console.log(
          "login.html - handleSubmit: email - password",
          email,
          password
        );

        // prepare response message
        const responseMessage = document.getElementById("responseMessage");

        // send the data to api through a POST request
        fetch("http://localhost:8080/api/users/:id", {
          method: "POST",
          // ensure headers are set correctly
          headers: {
            Accept: "application/json",
            "Content-Type": "application/json",
          },
          // stringify the body object
          body: JSON.stringify({
            email: email,
            password: password,
          }),
        }).then((response) => {
          // check the response status
          if (response.status === 200) {
            // if OK, the user has correct email and password
            // navigate user to dashboard
            window.location.href = "/dashboard.html"
          } else if (response.status === 401) {
            console.log("Invalid email or password");
            // add error message to page
            responseMessage.innerHTML = "Invalid email or password";
          } else if (response.status === 404) {
            console.log("Email or password not found");
            responseMessage.innerHTML = "Email or password not found";
          }
        });
        // do not need another .then for .json()
        // since we're only checking the response code
      }
    </script>
  </body>
</html>